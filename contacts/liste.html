<!DOCTYPE html><html><head>
	<title>mes contacts</title>
	<meta name='viewport' content='width=device-width,initial-scale=1'/>
	<meta charset='utf-8'/>
	<base target='blank'>
	<link rel='icon' type='image/svg+xml' href='../../site-dp/data/nounours-perso.svg'/>
	<link rel='stylesheet' type='text/css' href='../../site-dp/library-css/structure.css'/>
	<link rel='stylesheet' type='text/css' href='../../site-dp/library-css/perso.css' media='screen'/>
	<script type='text/javascript' src='../../site-dp/library-js/text.js'></script>
	<script type='text/javascript' src='../../site-dp/library-js/list.js'></script>
	<script type='text/javascript' src='../../site-dp/library-js/file.js'></script>
	<script type='text/javascript' src='contacts.js'></script>
<style type='text/css'>
	section#liste {
		display: grid;
		grid-template-columns: 1fr 1fr;
	}
</style></head><body>
	<h1>mes contacts</h1>
	<section>
		<h2>rechercher des personnes</h2>
		<p>par relation</p><input type='text' id='relation'/>
		<p>par nom</p><input type='text' id='nom'/>
		<button onclick='rechercher()'>rechercher</button>
	</section>
	<section id='liste'></section>
	<template><div>
		<h2><a href='detail.html?prenom=$prenom&nom=$nom'>$prenom $nom, $surnom</a></h2>
		<p>m√©tier: $job</p>
		<p>relation: $relation</p>
	</div></template>
</body><script type='text/javascript'>
	var personneHtml = document.getElementsByTagName ('template')[0].innerHTML;
	var personneListTag = document.getElementsByTagName ('section')[1];

	var pList = new PersonneList();
	pList.read();
	pList.listerRelations();

	function rechercher(){
		var query = document.getElementById ('relation').value;
		var newList = null;
		if (query && query != undefined) newList = pList.trouverParRelation (query);
		else{
			query = document.getElementById ('nom').value;
			if (query && query != undefined) newList = pList.trouverParNom (query);
		}
		var pText ="";
		if (newList == null) pText = pList.toTemplate (personneHtml);
		else pText = newList.toTemplate (personneHtml);
		personneListTag.innerHTML = pText;
	}

	var pText = pList.toTemplate (personneHtml);
	personneListTag.innerHTML = pText;
</script></html>