<!DOCTYPE html><html><head>
	<title>lettres en braille</title>
	<meta name='viewport' content='width=device-width,initial-scale=1'/>
	<meta charset='utf-8'/>
	<base target='blank' href='../site-dp/'/>
	<link rel='icon' type='image/svg+xml' href='data/nounours-perso.svg'/>
	<link rel='stylesheet' type='text/css' href='library-css/structure.css'/>
	<link rel='stylesheet' type='text/css' href='library-css/popup.css'/>
	<link rel='stylesheet' type='text/css' href='library-css/perso.css' media='screen'/>
	<script type='text/javascript' src='library-js/popup.js'></script>
<style type='text/css'>
	b-letter, b-number {
		display: inline-grid;
		grid-template-columns: 1fr 1fr;
		grid-template-rows: 1fr 1fr 1fr 2fr;
		width: 1em;
		height: 3em;
		grid-gap: 0.3em;
		margin: 0.5em;
		text-align: center;
	}
	b-letter hr, b-number hr {
		margin: 0;
		height: unset;
		background-color: transparent;
	}
	b-letter p, b-number p {
		margin: 0;
		padding: 0;
		grid-column: 1/3;
	/*	display: none; */
	}
	b-letter hr.full, b-number hr.full { background-color: var(--text-color, black); }
	div#input {
		display: flex;
		flex-direction: row;
		flex-wrap: nowrap;
	}
	section#drag-drop {
		text-align: center;
		display: grid;
		grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
		grid-template-rows: 6em 4em;
	}
	section#drag-drop p {
		display: inline-block;
		border: solid 2px var(--bord-color);
		padding: 0.5em;
	}
	section#drag-drop p.ok { background-color: springgreen; }
	section#drag-drop p.ko { background-color: pink; }
	section#drag-drop b-letter p { display: none; }
</style></head><body>
	<section id='drag-drop'>
		<p onclick='selectLetter(this)'>a</p><p onclick='selectLetter(this)'>b</p><p onclick='selectLetter(this)'>c</p>
		<p onclick='selectLetter(this)'>d</p><p onclick='selectLetter(this)'>e</p><p onclick='selectLetter(this)'>f</p>
		<p onclick='selectLetter(this)'>g</p><p onclick='selectLetter(this)'>h</p><p onclick='selectLetter(this)'>i</p>
		<p onclick='selectLetter(this)'>j</p><p onclick='selectLetter(this)'>k</p><p onclick='selectLetter(this)'>l</p>
		<p onclick='selectLetter(this)'>m</p><p onclick='selectLetter(this)'>n</p><p onclick='selectLetter(this)'>o</p>
		<p onclick='selectLetter(this)'>p</p><p onclick='selectLetter(this)'>q</p><p onclick='selectLetter(this)'>r</p>
		<p onclick='selectLetter(this)'>s</p><p onclick='selectLetter(this)'>t</p><p onclick='selectLetter(this)'>u</p>
		<p onclick='selectLetter(this)'>v</p><p onclick='selectLetter(this)'>w</p><p onclick='selectLetter(this)'>x</p>
		<p onclick='selectLetter(this)'>y</p><p onclick='selectLetter(this)'>z</p>
		<b-letter onclick='selectBraille(this)' letter='a'></b-letter><b-letter onclick='selectBraille(this)' letter='b'></b-letter>
		<b-letter onclick='selectBraille(this)' letter='c'></b-letter><b-letter onclick='selectBraille(this)' letter='d'></b-letter>
		<b-letter onclick='selectBraille(this)' letter='e'></b-letter><b-letter onclick='selectBraille(this)' letter='f'></b-letter>
		<b-letter onclick='selectBraille(this)' letter='g'></b-letter><b-letter onclick='selectBraille(this)' letter='h'></b-letter>
		<b-letter onclick='selectBraille(this)' letter='i'></b-letter><b-letter onclick='selectBraille(this)' letter='j'></b-letter>
		<b-letter onclick='selectBraille(this)' letter='k'></b-letter><b-letter onclick='selectBraille(this)' letter='l'></b-letter>
		<b-letter onclick='selectBraille(this)' letter='m'></b-letter><b-letter onclick='selectBraille(this)' letter='n'></b-letter>
		<b-letter onclick='selectBraille(this)' letter='o'></b-letter><b-letter onclick='selectBraille(this)' letter='p'></b-letter>
		<b-letter onclick='selectBraille(this)' letter='q'></b-letter><b-letter onclick='selectBraille(this)' letter='r'></b-letter>
		<b-letter onclick='selectBraille(this)' letter='s'></b-letter><b-letter onclick='selectBraille(this)' letter='t'></b-letter>
		<b-letter onclick='selectBraille(this)' letter='u'></b-letter><b-letter onclick='selectBraille(this)' letter='v'></b-letter>
		<b-letter onclick='selectBraille(this)' letter='w'></b-letter><b-letter onclick='selectBraille(this)' letter='x'></b-letter>
		<b-letter onclick='selectBraille(this)' letter='y'></b-letter><b-letter onclick='selectBraille(this)' letter='z'></b-letter>
	</section>
	<section id='mot'>
		<h2>entrez une phrase</h2>
		<div id='input'><input type='text'><button onclick='writeBraille()'>validez</button></div>
		<div></div>
	</section>
	<section id='alphabet'>
		<h2><a href='https://fr.wikipedia.org/wiki/Braille'>l'alpabet en braille</a></h2>
		<b-letter letter='a'></b-letter><b-letter letter='b'></b-letter><b-letter letter='c'></b-letter><b-letter letter='d'></b-letter>
		<b-letter letter='e'></b-letter><b-letter letter='f'></b-letter><b-letter letter='g'></b-letter><b-letter letter='h'></b-letter>
		<b-letter letter='i'></b-letter><b-letter letter='j'></b-letter><b-letter letter='k'></b-letter><b-letter letter='l'></b-letter>
		<b-letter letter='m'></b-letter><b-letter letter='n'></b-letter><b-letter letter='o'></b-letter><b-letter letter='p'></b-letter>
		<b-letter letter='q'></b-letter><b-letter letter='r'></b-letter><b-letter letter='s'></b-letter><b-letter letter='t'></b-letter>
		<b-letter letter='u'></b-letter><b-letter letter='v'></b-letter><b-letter letter='w'></b-letter>
		<b-letter letter='x'></b-letter><b-letter letter='y'></b-letter><b-letter letter='z'></b-letter>
	</section>
	<section id='ponctuation'>
		<h2>ponctuation</h2>
		<b-letter letter='.'></b-letter><b-letter letter=':'></b-letter><b-letter letter=';'></b-letter><b-letter letter=','></b-letter>
		<b-letter letter='?'></b-letter><b-letter letter='!'></b-letter><b-letter letter='"'></b-letter>
		<b-letter letter="'"></b-letter><b-letter letter='('></b-letter><b-letter letter=')'></b-letter>
	</section>
	<section id='num-antoine'>
		<h2>numérotation antoine</h2>
		<b-letter letter='nb'></b-letter>
		<b-letter letter='0'></b-letter><b-letter letter='1'></b-letter><b-letter letter='2'></b-letter><b-letter letter='3'></b-letter>
		<b-letter letter='4'></b-letter><b-letter letter='5'></b-letter><b-letter letter='6'></b-letter>
		<b-letter letter='7'></b-letter><b-letter letter='8'></b-letter><b-letter letter='9'></b-letter>
	</section>
	<section id='num-braille'>
		<h2>numérotation braille</h2>
		<b-number number='nb'></b-number>
		<b-number number='0'></b-number><b-number number='1'></b-number><b-number number='2'></b-number><b-number number='3'></b-number>
		<b-number number='4'></b-number><b-number number='5'></b-number><b-number number='6'></b-number>
		<b-number number='7'></b-number><b-number number='8'></b-number><b-number number='9'></b-number>
	</section>
</body>
<script type='text/javascript'>
const brickTemplate = '<hr/><hr/><hr/><hr/><hr/><hr/><p></p>';

class BrailleLetter extends HTMLElement{
	constructor(){
		super();
		this.letter ="";
	}
	connectedCallback(){
		// appelée après le constructeur
		this.letter = this.getAttribute ('letter');
		this.innerHTML = brickTemplate;
		var points = this.getElementsByTagName ('hr');
		if ('aàbcçdeéèêëfghîïklmnoôpqruûvxyz'.indexOf (this.letter) >=0) points[0].className = 'full';
		if ('cçdéèëfgiîïjmnôœpqstwxy'.indexOf (this.letter) >=0) points[1].className = 'full';
		if ('àbçéèêëfghiïjlœpqrstvw,;:.?!"('.indexOf (this.letter) >=0) points[2].className = 'full';
		if ('àdeéghïjnoôqrtûwyz:.!")'.indexOf (this.letter) >=0) points[3].className = 'full';
		if ('àçéèklmnopqrstuvxyz;!"\'-()'.indexOf (this.letter) >=0) points[4].className = 'full';
		if ('àâçéèêëîïôœuûvwxyz.?"()-'.indexOf (this.letter) >=0) points[5].className = 'full';
		// chiffres antoine
		if (this.letter == 'nb') points[5].className = 'full';
		if ('12345678'.indexOf (this.letter) >=0) points[0].className = 'full';
		if ('034679'.indexOf (this.letter) >=0) points[1].className = 'full';
		if ('26789'.indexOf (this.letter) >=0) points[2].className = 'full';
		if ('04578'.indexOf (this.letter) >=0) points[3].className = 'full';
		if (this.letter == '0') points[4].className = 'full';
		if ('0123456789'.indexOf (this.letter) >=0) points[5].className = 'full';
		var letterSimple = this.getElementsByTagName ('p')[0];
		letterSimple.innerHTML = this.letter;
	}
}
class BrailleNumber extends BrailleLetter{
	connectedCallback(){
		// chiffres braille
		this.letter = this.getAttribute ('number');
		this.innerHTML = brickTemplate;
		var points = this.getElementsByTagName ('hr');
		if ('12345678'.indexOf (this.letter) >=0) points[0].className = 'full';
		if ('034679nb'.indexOf (this.letter) >=0) points[1].className = 'full';
		if ('026789'.indexOf (this.letter) >=0) points[2].className = 'full';
		if ('04578nb'.indexOf (this.letter) >=0) points[3].className = 'full';
		if (this.letter == 'nb'){
			points[4].className = 'full';
			points[5].className = 'full';
		}
		var letterSimple = this.getElementsByTagName ('p')[0];
		letterSimple.innerHTML = this.letter;
	}
}
customElements.define ('b-letter', BrailleLetter);
customElements.define ('b-number', BrailleNumber);

var container = document.getElementsByTagName ('div')[1];
function writeBraille(){
	var word = document.getElementsByTagName ('input')[0].value;
	container.innerHTML ="";
	for (var l=0; l< word.length; l++){
		var letter = document.createElement ('b-letter');
		letter.setAttribute ('letter', word[l]);
		letter.connectedCallback();
		container.appendChild (letter);
	}
}
var letter = null;
var braille = null;
function selectLetter (letterTmp){ letter = letterTmp; }
function selectBraille (brailleTmp){
	if (letter && letter != undefined){
		console.log (letter.innerText, brailleTmp.letter);
		if (letter.innerText.toLowerCase() === brailleTmp.letter){
			letter.className = 'ok';
		}
		else{
			letter.className = 'ko';
			openPopup ('les lettres ne correspondent pas', 'mauvaise attribution')
		}
		letter.appendChild (brailleTmp);
	}
	braille = brailleTmp;
}
</script>
</html>
