<!DOCTYPE html><html><head>
	<title>lettres en braille</title>
	<meta name='viewport' content='width=device-width,initial-scale=1'/>
	<meta charset='utf-8'/>
	<base target='blank' href='../site-dp/'/>
	<link rel='icon' type='image/svg+xml' href='data/nounours-perso.svg'/>
	<link rel='stylesheet' type='text/css' href='library-css/structure.css'/>
	<link rel='stylesheet' type='text/css' href='library-css/perso.css'/>
	<script type='text/javascript' src='library-js/popup.js'></script>
<style type='text/css'>
	b-letter, b-double {
		width: 1em;
		height: 2em;
		margin: 0.5em;
	}
	b-double { height: 3em; }
	div#input{
		display: flex;
		flex-direction: row;
		flex-wrap: nowrap;
	}
	section#drag-drop{
		text-align: center;
		display: grid;
		grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
		grid-template-rows: 6em 4em;
	}
	section#drag-drop p{
		display: inline-block;
		border: solid 2px var(--bord-color);
		padding: 0.5em;
	}
	section#drag-drop p.ok{ background-color: springgreen; }
	section#drag-drop p.ko{ background-color: pink; }
	section#drag-drop b-letter p{ display: none; }
</style></head><body>
	<section id='drag-drop' ondrop='drop(event)' ondragover='allowDrop(event)'>
		<p ondrop='drop(event)' ondragover='allowDrop(event)'>a</p><p ondrop='drop(event)' ondragover='allowDrop(event)'>b</p>
		<p ondrop='drop(event)' ondragover='allowDrop(event)'>c</p><p ondrop='drop(event)' ondragover='allowDrop(event)'>d</p>
		<p ondrop='drop(event)' ondragover='allowDrop(event)'>e</p><p ondrop='drop(event)' ondragover='allowDrop(event)'>f</p>
		<p ondrop='drop(event)' ondragover='allowDrop(event)'>g</p><p ondrop='drop(event)' ondragover='allowDrop(event)'>h</p>
		<p ondrop='drop(event)' ondragover='allowDrop(event)'>i</p><p ondrop='drop(event)' ondragover='allowDrop(event)'>j</p>
		<p ondrop='drop(event)' ondragover='allowDrop(event)'>k</p><p ondrop='drop(event)' ondragover='allowDrop(event)'>l</p>
		<p ondrop='drop(event)' ondragover='allowDrop(event)'>m</p><p ondrop='drop(event)' ondragover='allowDrop(event)'>n</p>
		<p ondrop='drop(event)' ondragover='allowDrop(event)'>o</p><p ondrop='drop(event)' ondragover='allowDrop(event)'>p</p>
		<p ondrop='drop(event)' ondragover='allowDrop(event)'>q</p><p ondrop='drop(event)' ondragover='allowDrop(event)'>r</p>
		<p ondrop='drop(event)' ondragover='allowDrop(event)'>s</p><p ondrop='drop(event)' ondragover='allowDrop(event)'>t</p>
		<p ondrop='drop(event)' ondragover='allowDrop(event)'>u</p><p ondrop='drop(event)' ondragover='allowDrop(event)'>v</p>
		<p ondrop='drop(event)' ondragover='allowDrop(event)'>w</p><p ondrop='drop(event)' ondragover='allowDrop(event)'>x</p>
		<p ondrop='drop(event)' ondragover='allowDrop(event)'>y</p><p ondrop='drop(event)' ondragover='allowDrop(event)'>z</p>
		<b-letter id='letter-a' draggable='true' ondragstart='drag(event)' letter='a'></b-letter>
		<b-letter id='letter-b' draggable='true' ondragstart='drag(event)' letter='b'></b-letter>
		<b-letter id='letter-c' draggable='true' ondragstart='drag(event)' letter='c'></b-letter>
		<b-letter id='letter-d' draggable='true' ondragstart='drag(event)' letter='d'></b-letter>
		<b-letter id='letter-e' draggable='true' ondragstart='drag(event)' letter='e'></b-letter>
		<b-letter id='letter-f' draggable='true' ondragstart='drag(event)' letter='f'></b-letter>
		<b-letter id='letter-g' draggable='true' ondragstart='drag(event)' letter='g'></b-letter>
		<b-letter id='letter-h' draggable='true' ondragstart='drag(event)' letter='h'></b-letter>
		<b-letter id='letter-i' draggable='true' ondragstart='drag(event)' letter='i'></b-letter>
		<b-letter id='letter-j' draggable='true' ondragstart='drag(event)' letter='j'></b-letter>
		<b-letter id='letter-k' draggable='true' ondragstart='drag(event)' letter='k'></b-letter>
		<b-letter id='letter-l' draggable='true' ondragstart='drag(event)' letter='l'></b-letter>
		<b-letter id='letter-m' draggable='true' ondragstart='drag(event)' letter='m'></b-letter>
		<b-letter id='letter-n' draggable='true' ondragstart='drag(event)' letter='n'></b-letter>
		<b-letter id='letter-o' draggable='true' ondragstart='drag(event)' letter='o'></b-letter>
		<b-letter id='letter-p' draggable='true' ondragstart='drag(event)' letter='p'></b-letter>
		<b-letter id='letter-q' draggable='true' ondragstart='drag(event)' letter='q'></b-letter>
		<b-letter id='letter-r' draggable='true' ondragstart='drag(event)' letter='r'></b-letter>
		<b-letter id='letter-s' draggable='true' ondragstart='drag(event)' letter='s'></b-letter>
		<b-letter id='letter-t' draggable='true' ondragstart='drag(event)' letter='t'></b-letter>
		<b-letter id='letter-u' draggable='true' ondragstart='drag(event)' letter='u'></b-letter>
		<b-letter id='letter-v' draggable='true' ondragstart='drag(event)' letter='v'></b-letter>
		<b-letter id='letter-w' draggable='true' ondragstart='drag(event)' letter='w'></b-letter>
		<b-letter id='letter-x' draggable='true' ondragstart='drag(event)' letter='x'></b-letter>
		<b-letter id='letter-y' draggable='true' ondragstart='drag(event)' letter='y'></b-letter>
		<b-letter id='letter-z' draggable='true' ondragstart='drag(event)' letter='z'></b-letter>
	</section>
	<section id='mot'>
		<h2>entrez une phrase</h2>
		<div id='input'><input type='text'><button onclick='writeBraille()'>validez</button></div>
		<div></div>
	</section>
	<section id='alphabet'>
		<h2><a href='https://fr.wikipedia.org/wiki/Braille'>l'alpabet en braille</a></h2>
		<b-double letter='a'></b-double><b-double letter='b'></b-double><b-double letter='c'></b-double><b-double letter='d'></b-double>
		<b-double letter='e'></b-double><b-double letter='f'></b-double><b-double letter='g'></b-double><b-double letter='h'></b-double>
		<b-double letter='i'></b-double><b-double letter='j'></b-double><b-double letter='k'></b-double><b-double letter='l'></b-double>
		<b-double letter='m'></b-double><b-double letter='n'></b-double><b-double letter='o'></b-double><b-double letter='p'></b-double>
		<b-double letter='q'></b-double><b-double letter='r'></b-double><b-double letter='s'></b-double><b-double letter='t'></b-double>
		<b-double letter='u'></b-double><b-double letter='v'></b-double><b-double letter='w'></b-double>
		<b-double letter='x'></b-double><b-double letter='y'></b-double><b-double letter='z'></b-double>
	</section>
	<section id='ponctuation'>
		<h2>ponctuation</h2>
		<b-double letter='.'></b-double><b-double letter=':'></b-double><b-double letter=';'></b-double><b-double letter=','></b-double>
		<b-double letter='?'></b-double><b-double letter='!'></b-double><b-double letter='"'></b-double>
		<b-double letter="'"></b-double><b-double letter='('></b-double><b-double letter=')'></b-double>
	</section>
	<section id='numero'>
		<h2>numérotation antoine et braille</h2>
		<b-double letter='nba'></b-double><b-double letter='nbb'></b-double>
		<b-double letter='0'></b-double><b-double letter='1'></b-double><b-double letter='2'></b-double><b-double letter='3'></b-double>
		<b-double letter='4'></b-double><b-double letter='5'></b-double><b-double letter='6'></b-double>
		<b-double letter='7'></b-double><b-double letter='8'></b-double><b-double letter='9'></b-double>
	</section>
</body>
<script type='text/javascript'>
const brickTemplate = '<hr/><hr/><hr/><hr/><hr/><hr/>';
class BrailleLetter extends HTMLElement{
	constructor(){
		super();
		this.letter ="";
	}
	connectedCallback(){
		// appelée après le constructeur
		this.letter = this.getAttribute ('letter');
		this.innerHTML = brickTemplate;
		var points = this.getElementsByTagName ('hr');
		// style
		this.style.display = 'inline-grid';
		this.style.gridTemplateColumns = '1fr 1fr';
		this.style.gridTemplateRows = '1fr 1fr 1fr';
		this.style.gridGap = '0.3em';
		this.style.textAlign = 'center';
	//	console.log ('color', this.style.color);
		const style = window.getComputedStyle (this);
		for (var c=0; c<6; c++){
			this.children[c].style.margin = '0';
			this.children[c].style.height = 'unset';
			this.children[c].style.opacity = '0.1';
			this.children[c].style.backgroundColor = style.color;
		}
		if (this.letter === 'nba' || this.letter === 'nbb'){
			// nba = chiffres antoine, nbb = chiffres braille
			points[5].style.opacity = '1';
			if (this.letter === 'nbb'){
				points[1].style.opacity = '1';
				points[3].style.opacity = '1';
				points[4].style.opacity = '1';
			}
		}
		else if ('0123456789'.includes (this.letter)){
			// chiffres
			if ('12345678'.includes (this.letter)) points[0].style.opacity = '1';
			if ('034679'.includes (this.letter)) points[1].style.opacity = '1';
			if ('26789'.includes (this.letter)) points[2].style.opacity = '1';
			if ('04578'.includes (this.letter)) points[3].style.opacity = '1';
			if (this.letter == '0') points[4].style.opacity = '1';
		//	points[5].style.opacity = '1';	pour la numérotation antoine
		}
		else{
			// lettres et ponctuation
			if ('aàbcçdeéèêëfghîïklmnoôpqruûvxyz'.includes (this.letter)) points[0].style.opacity = '1';
			if ('cçdéèëfgiîïjmnôœpqstwxy'.includes (this.letter)) points[1].style.opacity = '1';
			if ('àbçéèêëfghiïjlœpqrstvw,;:.?!"('.includes (this.letter)) points[2].style.opacity = '1';
			if ('àdeéghïjnoôqrtûwyz:.!")'.includes (this.letter)) points[3].style.opacity = '1';
			if ('àçéèklmnopqrstuvxyz;!"\'-()'.includes (this.letter)) points[4].style.opacity = '1';
			if ('àâçéèêëîïôœuûvwxyz.?"()-'.includes (this.letter)) points[5].style.opacity = '1';
		}
	}
}
class BrailleDouble extends BrailleLetter{
	connectedCallback(){
		super.connectedCallback();
		this.innerHTML = this.innerHTML + '<p>' + this.letter + '</p>';
		// style
		this.style.gridTemplateRows = '1fr 1fr 1fr 2fr';
		this.children[6].style.margin = '0';
		this.children[6].style.padding = '0';
		this.children[6].style.gridColumn = '1/3';
}}
customElements.define ('b-letter', BrailleLetter);
customElements.define ('b-double', BrailleDouble);

var container = document.getElementsByTagName ('div')[1];
function writeBraille(){
	var word = document.getElementsByTagName ('input')[0].value;
	container.innerHTML ="";
	for (var l=0; l< word.length; l++){
		var letter = document.createElement ('b-letter');
		letter.setAttribute ('letter', word[l]);
		letter.connectedCallback();
		container.appendChild (letter);
}}
// code pris sur https://www.w3schools.com/html/html5_draganddrop.asp
function allowDrop (evt){ evt.preventDefault(); }
function drag (evt){
	evt.target.parentElement.className ="";
	evt.dataTransfer.setData ('idBraille', evt.target.id);
}
function drop (evt){
	evt.preventDefault();
	var idBraille = evt.dataTransfer.getData ('idBraille');
	var letter = document.getElementById (idBraille);
	if ('HTMLParagraphElement' === evt.target.constructor.name && evt.target.innerText === letter.letter.toUpperCase()){
		evt.target.className = 'ok';
		evt.target.appendChild (letter);
	}
	else if ('HTMLParagraphElement' === evt.target.constructor.name){
		evt.target.className = 'ko';
		evt.target.appendChild (letter);
	//	openPopup ('les lettres ne correspondent pas', 'mauvaise attribution')
	}
	else evt.target.appendChild (letter);
}
</script>
</html>
